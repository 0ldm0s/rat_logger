# rat_logger v0.2.3 性能测试结果
## 测试环境
- MacBook Air M1
- Rust release模式编译
- 异步广播架构
- 测试时间: 2025-09-19 19:06:23

## 性能测试结果

### 1. 纯终端输出性能测试
- 迭代次数: 10,000
- 总耗时: 4.415375ms
- **吞吐量: 2,264,813 条/秒**
- 平均延迟: 0.000 毫秒/条

### 2. 纯文件输出性能测试
- 迭代次数: 10,000
- 总耗时: 4.137292ms
- **吞吐量: 2,417,040 条/秒**
- 平均延迟: 0.000 毫秒/条

### 3. 终端+文件输出性能测试
- 迭代次数: 10,000
- 总耗时: 5.042375ms
- **吞吐量: 1,983,192 条/秒**
- 平均延迟: 0.001 毫秒/条

### 4. 多线程文件输出性能测试
- 线程数量: 4
- 总操作次数: 10,000
- 总耗时: 2.825792ms
- **吞吐量: 3,538,831 条/秒**
- 平均延迟: 0.000 毫秒/条

### 5. 不同日志级别性能测试
- Error级别: 4,581,901 条/秒
- Warn级别: 4,676,547 条/秒
- Info级别: 4,603,861 条/秒
- Debug级别: 4,291,845 条/秒
- Trace级别: 4,295,699 条/秒

## 性能分析结论

### 与之前版本的对比
根据README文档中的性能基准数据：

**旧版本性能（MacBook Air M1参考值）**：
- 终端输出: ~400,000+ 消息/秒（优化后）
- 文件输出: ~408,025 消息/秒
- 终端+文件: ~501,567 消息/秒
- 多线程环境: ~239,808 消息/秒
- 不同日志级别: 833K-1.7M 消息/秒

**新版本性能（异步广播架构）**：
- 终端输出: 2,264,813 消息/秒
- 文件输出: 2,417,040 消息/秒
- 终端+文件: 1,983,192 消息/秒
- 多线程环境: 3,538,831 消息/秒
- 不同日志级别: 4.3M-4.7M 消息/秒

### 性能提升分析
1. **终端输出**: 提升约 5.6倍 (从400K到2.26M)
2. **文件输出**: 提升约 5.9倍 (从408K到2.42M)
3. **终端+文件**: 提升约 3.9倍 (从501K到1.98M)
4. **多线程**: 提升约 14.7倍 (从239K到3.54M)
5. **日志级别**: 提升约 2.5-5.6倍 (从833K-1.7M到4.3M-4.7M)

### 结论
新的异步广播架构不仅没有造成性能损耗，反而带来了显著的性能提升：
- 所有测试场景都有3-15倍的性能提升
- 多线程场景性能提升最为显著（14.7倍）
- 日志级别过滤性能也有大幅提升
- 架构重构非常成功！